<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大六壬活时起课</title>
    <style>
        .title {  
            text-align: center;  
            font-size: 24px;  
            margin-top: 20px;  
            margin-bottom: 20px;  
        }  
        .grid-container {  
            display: grid;  
            grid-template-columns: repeat(4, 100px);  
            grid-template-rows: repeat(4, 100px);  
            gap: 1px;  
            width: 400px;  
            height: 400px;  
            margin: 0 auto;  
            position: relative;  
        }  
        .grid-item {  
            display: flex;  
            justify-content: center;  
            align-items: center;  
            background-color: #e0e0e0;  
            color: #333;  
            font-size: 36px;  
            cursor: pointer;  
            transition: background-color 0.3s, color 0.3s;  
            user-select: none;  
        }  
        .grid-item.highlight {  
            background-color: yellow;  
            color: black;  
        }  
        .grid-item.center {  
            background-color: #ccc;  
            cursor: default;  
            grid-column: 2 / span 2;  
            grid-row: 2 / span 2;  
            padding: 0;  
        }  
        .grid-item.center img {  
            width: 100%;  
            height: 100%;  
            object-fit: cover;  
        }  
        .button-container {  
            text-align: center;  
            margin-top: 20px;  
        }  
        .random-button {  
            padding: 10px 20px;  
            font-size: 18px;  
            cursor: pointer;  
        }
    </style>
</head>
<body>

<div class="title">大六壬抽取活时</div>

<div class="grid-container">
    <div class="grid-item index-0">巳</div>
    <div class="grid-item index-1">午</div>
    <div class="grid-item index-2">未</div>
    <div class="grid-item index-3">申</div>

    <div class="grid-item index-4">辰</div>
    <div class="grid-item center"><img src="https://raw.githubusercontent.com/caoxiaoman999/XiaoMan/main/IMG_1322.jpeg" alt="中心图片"></div>
    <div class="grid-item index-5">酉</div>

    <div class="grid-item index-6">卯</div>
    <div class="grid-item index-7">戌</div>

    <div class="grid-item index-8">寅</div>
    <div class="grid-item index-9">丑</div>
    <div class="grid-item index-10">子</div>
    <div class="grid-item index-11">亥</div>
</div>

<div class="button-container">
    <button class="random-button">开始</button>
</div>

<script>
    const items = document.querySelectorAll('.grid-item:not(.center)');
    const button = document.querySelector('.random-button');
    let isSpinning = false;
    let spinInterval;
    let currentIndex = 0;
    const delay = 300;

    // 正确的顺时针路径：子 -> 丑 -> 寅 -> 卯 -> 辰 -> 巳 -> 午 -> 未 -> 申 -> 酉 -> 戌 -> 亥  
    const path = [10, 9, 8, 6, 4, 0, 1, 2, 3, 5, 7, 11];

    function clearHighlights() {
        items.forEach(item => {
            item.classList.remove('highlight');
        });
    }

    function highlightItem(index) {
        clearHighlights();
        items[index].classList.add('highlight');
    }

    function startSpin() {
        currentIndex = path.indexOf(10); // 从“子”开始
        spinInterval = setInterval(() => {
            highlightItem(path[currentIndex]);
            currentIndex = (currentIndex + 1) % path.length;
        }, delay);
        button.textContent = '停止';
        isSpinning = true;
    }

    function stopSpin() {
        clearInterval(spinInterval);
        isSpinning = false;
        button.textContent = '开始';
        // 停止后的回调逻辑
    }

    button.addEventListener('click', () => {
        if (!isSpinning) {
            startSpin();
        } else {
            stopSpin();
        }
    });
</script>

</body>
</html>